<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link type="text/css" rel="stylesheet" href="style.css">
<!-- Generated by The Open Group's rhtm tool v1.2.1 -->
<!-- Copyright (c) 2001-2004 IEEE and The Open Group, All Rights Reserved -->
<title>pthread_rwlock_destroy</title>
</head>
<body bgcolor="white">
<script type="text/javascript" language="JavaScript" src="../jscript/codes.js">
</script>

<basefont size="3"> <a name="pthread_rwlock_destroy"></a> <a name="tag_03_555"></a><!-- pthread_rwlock_destroy -->
 <!--header start-->
<center><font size="2">The Open Group Base Specifications Issue 6<br>
IEEE Std 1003.1, 2004 Edition<br>
Copyright &copy; 2001-2004 The IEEE and The Open Group, All Rights reserved.</font></center>

<!--header end-->
<hr size="2" noshade>
<h4><a name="tag_03_555_01"></a>NAME</h4>

<blockquote>pthread_rwlock_destroy, pthread_rwlock_init - destroy and initialize a read-write lock object</blockquote>

<h4><a name="tag_03_555_02"></a>SYNOPSIS</h4>

<blockquote class="synopsis">
<div class="box"><code><tt><sup>[<a href="javascript:open_code('THR')">THR</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> #include &lt;<a href="../basedefs/pthread.h.html">pthread.h</a>&gt;<br>
<br>
 int pthread_rwlock_destroy(pthread_rwlock_t *</tt><i>rwlock</i><tt>);<br>
 int pthread_rwlock_init(pthread_rwlock_t *restrict</tt> <i>rwlock</i><tt>,<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const pthread_rwlockattr_t *restrict</tt> <i>attr</i><tt>); <img src="../images/opt-end.gif"
alt="[Option End]" border="0"></tt></code></div>

<tt><br>
</tt></blockquote>

<h4><a name="tag_03_555_03"></a>DESCRIPTION</h4>

<blockquote>
<p>The <i>pthread_rwlock_destroy</i>() function shall destroy the read-write lock object referenced by <i>rwlock</i> and release
any resources used by the lock. The effect of subsequent use of the lock is undefined until the lock is reinitialized by another
call to <i>pthread_rwlock_init</i>(). An implementation may cause <i>pthread_rwlock_destroy</i>() to set the object referenced by
<i>rwlock</i> to an invalid value. Results are undefined if <i>pthread_rwlock_destroy</i>() is called when any thread holds
<i>rwlock</i>. Attempting to destroy an uninitialized read-write lock results in undefined behavior.</p>

<p>The <i>pthread_rwlock_init</i>() function shall allocate any resources required to use the read-write lock referenced by
<i>rwlock</i> and initializes the lock to an unlocked state with attributes referenced by <i>attr</i>. If <i>attr</i> is NULL, the
default read-write lock attributes shall be used; the effect is the same as passing the address of a default read-write lock
attributes object. Once initialized, the lock can be used any number of times without being reinitialized. Results are undefined if
<i>pthread_rwlock_init</i>() is called specifying an already initialized read-write lock. Results are undefined if a read-write
lock is used without first being initialized.</p>

<p>If the <i>pthread_rwlock_init</i>() function fails, <i>rwlock</i> shall not be initialized and the contents of <i>rwlock</i> are
undefined.</p>

<p>Only the object referenced by <i>rwlock</i> may be used for performing synchronization. The result of referring to copies of
that object in calls to <i>pthread_rwlock_destroy</i>(), <a href=
"../functions/pthread_rwlock_rdlock.html"><i>pthread_rwlock_rdlock</i>()</a>, <a href=
"../functions/pthread_rwlock_timedrdlock.html"><i>pthread_rwlock_timedrdlock</i>()</a>, <a href=
"../functions/pthread_rwlock_timedwrlock.html"><i>pthread_rwlock_timedwrlock</i>()</a>, <a href=
"../functions/pthread_rwlock_tryrdlock.html"><i>pthread_rwlock_tryrdlock</i>()</a>, <a href=
"../functions/pthread_rwlock_trywrlock.html"><i>pthread_rwlock_trywrlock</i>()</a>, <a href=
"../functions/pthread_rwlock_unlock.html"><i>pthread_rwlock_unlock</i>()</a>, or <a href=
"../functions/pthread_rwlock_wrlock.html"><i>pthread_rwlock_wrlock</i>()</a> is undefined.</p>
</blockquote>

<h4><a name="tag_03_555_04"></a>RETURN VALUE</h4>

<blockquote>
<p>If successful, the <i>pthread_rwlock_destroy</i>() and <i>pthread_rwlock_init</i>() functions shall return zero; otherwise, an
error number shall be returned to indicate the error.</p>

<p>The [EBUSY] and [EINVAL] error checks, if implemented, act as if they were performed immediately at the beginning of processing
for the function and caused an error return prior to modifying the state of the read-write lock specified by <i>rwlock</i>.</p>
</blockquote>

<h4><a name="tag_03_555_05"></a>ERRORS</h4>

<blockquote>
<p>The <i>pthread_rwlock_destroy</i>() function may fail if:</p>

<dl compact>
<dt>[EBUSY]</dt>

<dd>The implementation has detected an attempt to destroy the object referenced by <i>rwlock</i> while it is locked.</dd>

<dt>[EINVAL]</dt>

<dd>The value specified by <i>rwlock</i> is invalid.</dd>
</dl>

<p>The <i>pthread_rwlock_init</i>() function shall fail if:</p>

<dl compact>
<dt>[EAGAIN]</dt>

<dd>The system lacked the necessary resources (other than memory) to initialize another read-write lock.</dd>

<dt>[ENOMEM]</dt>

<dd>Insufficient memory exists to initialize the read-write lock.</dd>

<dt>[EPERM]</dt>

<dd>The caller does not have the privilege to perform the operation.</dd>
</dl>

<p>The <i>pthread_rwlock_init</i>() function may fail if:</p>

<dl compact>
<dt>[EBUSY]</dt>

<dd>The implementation has detected an attempt to reinitialize the object referenced by <i>rwlock</i>, a previously initialized but
not yet destroyed read-write lock.</dd>

<dt>[EINVAL]</dt>

<dd>The value specified by <i>attr</i> is invalid.</dd>
</dl>

<p>These functions shall not return an error code of [EINTR].</p>
</blockquote>

<hr>
<div class="box"><em>The following sections are informative.</em></div>

<h4><a name="tag_03_555_06"></a>EXAMPLES</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4><a name="tag_03_555_07"></a>APPLICATION USAGE</h4>

<blockquote>
<p>Applications using these and related read-write lock functions may be subject to priority inversion, as discussed in the Base
Definitions volume of IEEE&nbsp;Std&nbsp;1003.1-2001, <a href="../basedefs/xbd_chap03.html#tag_03_285">Section 3.285, Priority
Inversion</a>.</p>
</blockquote>

<h4><a name="tag_03_555_08"></a>RATIONALE</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4><a name="tag_03_555_09"></a>FUTURE DIRECTIONS</h4>

<blockquote>
<p>None.</p>
</blockquote>

<h4><a name="tag_03_555_10"></a>SEE ALSO</h4>

<blockquote>
<p><a href="pthread_rwlock_rdlock.html"><i>pthread_rwlock_rdlock</i>()</a>, <a href=
"pthread_rwlock_timedrdlock.html"><i>pthread_rwlock_timedrdlock</i>()</a>, <a href=
"pthread_rwlock_timedwrlock.html"><i>pthread_rwlock_timedwrlock</i>()</a>, <a href=
"pthread_rwlock_tryrdlock.html"><i>pthread_rwlock_tryrdlock</i>()</a>, <a href=
"pthread_rwlock_trywrlock.html"><i>pthread_rwlock_trywrlock</i>()</a>, <a href=
"pthread_rwlock_unlock.html"><i>pthread_rwlock_unlock</i>()</a>, <a href=
"pthread_rwlock_wrlock.html"><i>pthread_rwlock_wrlock</i>()</a>, the Base Definitions volume of IEEE&nbsp;Std&nbsp;1003.1-2001, <a
href="../basedefs/pthread.h.html"><i>&lt;pthread.h&gt;</i></a></p>
</blockquote>

<h4><a name="tag_03_555_11"></a>CHANGE HISTORY</h4>

<blockquote>
<p>First released in Issue 5.</p>
</blockquote>

<h4><a name="tag_03_555_12"></a>Issue 6</h4>

<blockquote>
<p>The following changes are made for alignment with IEEE&nbsp;Std&nbsp;1003.1j-2000:</p>

<ul>
<li>
<p>The margin code in the SYNOPSIS is changed to THR to indicate that the functionality is now part of the Threads option
(previously it was part of the Read-Write Locks option in IEEE&nbsp;Std&nbsp;1003.1j-2000 and also part of the XSI extension). The
initializer macro is also deleted from the SYNOPSIS.</p>
</li>

<li>
<p>The DESCRIPTION is updated as follows:</p>

<ul>
<li>
<p>It explicitly notes allocation of resources upon initialization of a read-write lock object.</p>
</li>

<li>
<p>A paragraph is added specifying that copies of read-write lock objects may not be used.</p>
</li>
</ul>
</li>

<li>
<p>An [EINVAL] error is added to the ERRORS section for <i>pthread_rwlock_init</i>(), indicating that the <i>rwlock</i> value is
invalid.</p>
</li>

<li>
<p>The SEE ALSO section is updated.</p>
</li>
</ul>

<p>The <b>restrict</b> keyword is added to the <i>pthread_rwlock_init</i>() prototype for alignment with the ISO/IEC&nbsp;9899:1999
standard.</p>

<p>IEEE&nbsp;Std 1003.1-2001/Cor&nbsp;1-2002, item XSH/TC1/D6/45 is applied, adding APPLICATION USAGE relating to priority
inversion.</p>
</blockquote>

<div class="box"><em>End of informative text.</em></div>

<hr size="2" noshade>
<center><font size="2"><!--footer start-->
UNIX &reg; is a registered Trademark of The Open Group.<br>
POSIX &reg; is a registered Trademark of The IEEE.<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../utilities/contents.html">XCU</a> | <a href="../functions/contents.html">XSH</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>

<!--footer end-->
<hr size="2" noshade>
</body>
</html>

